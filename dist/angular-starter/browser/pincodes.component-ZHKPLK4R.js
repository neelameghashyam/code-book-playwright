import{a as xe,b as ye,c as Ce,d as he,e as Le,f as Ae}from"./chunk-5HKDVOZW.js";import{a as De}from"./chunk-JGDGZY6W.js";import{b as ot,c as rt}from"./chunk-N3DUFGH4.js";import{b as Ze,c as et}from"./chunk-LNA6J5UG.js";import{a as x,b as Ie,c as Fe,d as Ve,e as Re,f as qe}from"./chunk-7GDRIGFI.js";import{a as Oe,b as We,c as He,d as Be,e as je,f as ze,g as Je,h as Qe,i as $e,j as Ue,k as Ge}from"./chunk-PPHCUSVG.js";import{a as Te}from"./chunk-V3YCIJYQ.js";import{a as tt,b as it,c as nt,g as te}from"./chunk-LAF373ZA.js";import"./chunk-JURKDGMK.js";import{B as Pe,G as Se,H as ve,J as we,L as ke,M as Me,T as Ee,U as Ne,W as Y,ha as Z,ja as ee,na as Ke,ra as Xe,sa as Ye}from"./chunk-7M6NR5Y6.js";import{a as z,b as J,c as Q,f as $,h as U}from"./chunk-277XKCPD.js";import{g as pe,h as fe,i as _e,ma as be,n as j,oa as G,pa as K,qa as X,s as ge}from"./chunk-JMDSQALO.js";import{Fb as w,Fc as H,Kc as B,Lb as d,Mb as r,Nb as a,Ob as O,Pb as h,Qb as P,Sb as y,Xb as g,Yb as u,_a as s,a as v,ac as se,b as k,ba as ce,bc as de,cc as me,d as L,eb as ie,ga as M,gc as S,hc as W,ic as ne,lb as A,lc as l,ma as p,mc as N,na as f,nc as E,pc as ue,qc as T,rb as b,rc as D,s as le,sc as I,xc as F,yc as V}from"./chunk-ZH2ICRTR.js";var mt={pincodes:[],initialized:!1,error:null,currentPage:1,pageSize:10,searchQuery:"",isLoading:!1,sortField:null,sortDirection:"asc"},ut="https://dbapiservice.onrender.com/dbapis/v1/pincodes",at=Ie({providedIn:"root"},qe(mt),Fe(({pincodes:e,searchQuery:c,currentPage:t,pageSize:n,sortField:o,sortDirection:i})=>{let _=B(()=>{let m=e().filter(C=>String(C.officeName||"").toLowerCase().includes(c().toLowerCase())||String(C.pincode||"").toLowerCase().includes(c().toLowerCase())||String(C.districtName||"").toLowerCase().includes(c().toLowerCase())||String(C.taluk||"").toLowerCase().includes(c().toLowerCase())||String(C.stateName||"").toLowerCase().includes(c().toLowerCase())||String(C.city||"").toLowerCase().includes(c().toLowerCase()));return o()&&(m=m.sort((C,dt)=>{let oe=o(),re=String(C[oe]||"").toLowerCase(),ae=String(dt[oe]||"").toLowerCase();return i()==="asc"?re.localeCompare(ae):ae.localeCompare(re)})),m});return{filteredPincodes:_,paginatedPincodes:B(()=>{let m=(t()-1)*n();return _().slice(m,m+n())}),totalPages:B(()=>Math.ceil(_().length/n()))}}),Re((e,c=M(ge))=>({loadPincodes(){return L(this,null,function*(){try{x(e,{isLoading:!0,error:null});let n=localStorage.getItem("pincodes"),o=[];n?o=JSON.parse(n).map(i=>k(v({},i),{pincode:String(i.pincode||""),officeName:String(i.officeName||""),districtName:String(i.districtName||""),taluk:String(i.taluk||""),stateName:String(i.stateName||""),city:String(i.city||"")})):(o=yield le(c.get(ut)),o=o.map(i=>k(v({},i),{pincode:String(i.pincode||""),officeName:String(i.officeName||""),districtName:String(i.districtName||""),taluk:String(i.taluk||""),stateName:String(i.stateName||""),city:String(i.city||"")})),localStorage.setItem("pincodes",JSON.stringify(o))),x(e,{pincodes:o,initialized:!0,isLoading:!1,error:null})}catch(n){throw x(e,{error:n.message||"Failed to load pincodes",isLoading:!1}),n}})},addPincode(n){return L(this,null,function*(){try{x(e,{isLoading:!0,error:null});let o=k(v({},n),{id:Date.now(),pincode:String(n.pincode||""),officeName:String(n.officeName||""),districtName:String(n.districtName||""),taluk:String(n.taluk||""),stateName:String(n.stateName||""),city:String(n.city||"")}),i=localStorage.getItem("pincodes"),_=i?JSON.parse(i):[];return _.push(o),localStorage.setItem("pincodes",JSON.stringify(_)),x(e,{pincodes:[...e.pincodes(),o],isLoading:!1,error:null}),o}catch(o){throw x(e,{error:o.message||"Failed to add pincode",isLoading:!1}),o}})},updatePincode(n){return L(this,null,function*(){try{x(e,{isLoading:!0,error:null});let o=localStorage.getItem("pincodes");if(o){let _=JSON.parse(o).map(m=>m.id===n.id?k(v({},n),{pincode:String(n.pincode||""),officeName:String(n.officeName||""),districtName:String(n.districtName||""),taluk:String(n.taluk||""),stateName:String(n.stateName||""),city:String(n.city||"")}):m);localStorage.setItem("pincodes",JSON.stringify(_)),x(e,{pincodes:e.pincodes().map(m=>m.id===n.id?k(v({},n),{pincode:String(n.pincode||""),officeName:String(n.officeName||""),districtName:String(n.districtName||""),taluk:String(n.taluk||""),stateName:String(n.stateName||""),city:String(n.city||"")}):m),isLoading:!1,error:null})}else x(e,{isLoading:!1,error:null})}catch(o){throw x(e,{error:o.message||"Failed to update pincode",isLoading:!1}),o}})},deletePincode(n){return L(this,null,function*(){try{x(e,{isLoading:!0,error:null});let o=localStorage.getItem("pincodes");if(o){let _=JSON.parse(o).filter(m=>m.id!==n);localStorage.setItem("pincodes",JSON.stringify(_)),x(e,{pincodes:e.pincodes().filter(m=>m.id!==n),isLoading:!1,error:null})}else x(e,{isLoading:!1,error:null})}catch(o){throw x(e,{error:o.message||"Failed to delete pincode",isLoading:!1}),o}})},setPage(n){x(e,{currentPage:n})},setPageSize(n){x(e,{pageSize:n,currentPage:1})},setSearchQuery(n){x(e,{searchQuery:n,currentPage:1})},sortPincodes(n,o){x(e,{sortField:n,sortDirection:o,currentPage:1})}})),Ve({onInit(e){e.loadPincodes()}}));var ct=(()=>{class e{pincodeStore=M(at);pincodes=this.pincodeStore.pincodes;filteredPincodes=this.pincodeStore.filteredPincodes;paginatedPincodes=this.pincodeStore.paginatedPincodes;totalPages=this.pincodeStore.totalPages;currentPage=this.pincodeStore.currentPage;pageSize=this.pincodeStore.pageSize;isLoading=this.pincodeStore.isLoading;error=this.pincodeStore.error;getPincodes(){return this.pincodeStore.loadPincodes()}addPincode(t){return this.pincodeStore.addPincode(t)}updatePincode(t){return this.pincodeStore.updatePincode(t)}deletePincode(t){return this.pincodeStore.deletePincode(t)}setPage(t){this.pincodeStore.setPage(t)}setPageSize(t){this.pincodeStore.setPageSize(t)}setSearchQuery(t){this.pincodeStore.setSearchQuery(t)}sortPincodes(t,n){this.pincodeStore.sortPincodes(t,n)}static \u0275fac=function(n){return new(n||e)};static \u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var R=e=>({"border-[#D7373C] dark:border-[#F87171]":e,"bg-gray-100 dark:bg-gray-700":!1}),q=(e,c)=>({"visible opacity-100":e,"invisible opacity-0":c}),st=(()=>{class e{dialogRef;data;formPincode={officeName:"",pincode:"",districtName:"",taluk:"",stateName:"",city:""};constructor(t,n={}){this.dialogRef=t,this.data=n,n?.pincode&&(this.formPincode=k(v({},n.pincode),{pincode:String(n.pincode.pincode)}))}savePincode(t){t.invalid||this.isFormInvalid()||this.dialogRef.close(k(v({},this.formPincode),{pincode:String(this.formPincode.pincode)}))}isFormInvalid(){return!this.formPincode.officeName||!this.formPincode.pincode||String(this.formPincode.pincode).length!==6||!/^[0-9]{6}$/.test(String(this.formPincode.pincode))||!this.formPincode.districtName||!this.formPincode.taluk||!this.formPincode.stateName||!this.formPincode.city}cancel(){this.dialogRef.close()}static \u0275fac=function(n){return new(n||e)(ie(tt),ie(it))};static \u0275cmp=A({type:e,selectors:[["app-add-pincodes"]],decls:53,vars:59,consts:[["pincodeForm","ngForm"],[1,"p-6","bg-white","dark:bg-gray-800","shadow-3xl","rounded-lg"],[1,"absolute","top-0","right-0","flex","justify-center","items-center","p-2","rounded-full","hover:bg-gray-100",3,"click"],[1,"flex","justify-between","items-center"],[1,"text-2xl","font-bold","text-gray-900","dark:text-gray-100",2,"font-family","'Roboto, sans-serif'"],[3,"ngSubmit"],[1,"grid","grid-cols-2","gap-4"],[1,"flex","flex-col","min-h-[6rem]"],["for","officeName",1,"text-sm","font-bold","text-gray-700","dark:text-gray-200"],["id","officeName","type","text","name","officeName","required","","placeholder","Office Name","aria-required","true","aria-describedby","officeNameError",1,"p-2","border","rounded","text-sm","w-full","focus:outline-none","focus:ring-2","focus:ring-blue-500","bg-white","dark:bg-gray-800","dark:border-gray-600","dark:text-gray-100","dark:placeholder-gray-400","h-10",3,"ngModelChange","ngModel","ngClass"],["id","officeNameError",1,"text-xs","text-[#D7373C]","dark:text-[#F87171]","mt-1","error-message",3,"ngClass"],["for","pincode",1,"text-sm","font-bold","text-gray-700","dark:text-gray-200"],["id","pincode","type","text","name","pincode","required","","pattern","[0-9]{6}","placeholder","Pincode","aria-required","true","aria-describedby","pincodeError",1,"p-2","border","rounded","text-sm","w-full","focus:outline-none","focus:ring-2","focus:ring-blue-500","bg-white","dark:bg-gray-800","dark:border-gray-600","dark:text-gray-100","dark:placeholder-gray-400","h-10",3,"ngModelChange","ngModel","ngClass"],["id","pincodeError",1,"text-xs","text-[#D7373C]","dark:text-[#F87171]","mt-1","error-message",3,"ngClass"],["for","districtName",1,"text-sm","font-bold","text-gray-700","dark:text-gray-200"],["id","districtName","type","text","name","districtName","required","","placeholder","District Name","aria-required","true","aria-describedby","districtNameError",1,"p-2","border","rounded","text-sm","w-full","focus:outline-none","focus:ring-2","focus:ring-blue-500","bg-white","dark:bg-gray-800","dark:border-gray-600","dark:text-gray-100","dark:placeholder-gray-400","h-10",3,"ngModelChange","ngModel","ngClass"],["id","districtNameError",1,"text-xs","text-[#D7373C]","dark:text-[#F87171]","mt-1","error-message",3,"ngClass"],["for","taluk",1,"text-sm","font-bold","text-gray-700","dark:text-gray-200"],["id","taluk","type","text","name","taluk","required","","placeholder","Taluk","aria-required","true","aria-describedby","talukError",1,"p-2","border","rounded","text-sm","w-full","focus:outline-none","focus:ring-2","focus:ring-blue-500","bg-white","dark:bg-gray-800","dark:border-gray-600","dark:text-gray-100","dark:placeholder-gray-400","h-10",3,"ngModelChange","ngModel","ngClass"],["id","talukError",1,"text-xs","text-[#D7373C]","dark:text-[#F87171]","mt-1","error-message",3,"ngClass"],["for","stateName",1,"text-sm","font-bold","text-gray-700","dark:text-gray-200"],["id","stateName","type","text","name","stateName","required","","placeholder","State Name","aria-required","true","aria-describedby","stateNameError",1,"p-2","border","rounded","text-sm","w-full","focus:outline-none","focus:ring-2","focus:ring-blue-500","bg-white","dark:bg-gray-800","dark:border-gray-600","dark:text-gray-100","dark:placeholder-gray-400","h-10",3,"ngModelChange","ngModel","ngClass"],["id","stateNameError",1,"text-xs","text-[#D7373C]","dark:text-[#F87171]","mt-1","error-message",3,"ngClass"],["for","city",1,"text-sm","font-bold","text-gray-700","dark:text-gray-200"],["id","city","type","text","name","city","required","","placeholder","City","aria-required","true","aria-describedby","cityError",1,"p-2","border","rounded","text-sm","w-full","focus:outline-none","focus:ring-2","focus:ring-blue-500","bg-white","dark:bg-gray-800","dark:border-gray-600","dark:text-gray-100","dark:placeholder-gray-400","h-10",3,"ngModelChange","ngModel","ngClass"],["id","cityError",1,"text-xs","text-[#D7373C]","dark:text-[#F87171]","mt-1","error-message",3,"ngClass"],[1,"mt-4","flex","justify-end","gap-2"],["mat-button","","type","button","aria-label","Cancel pincode form",1,"bg-gray-300","text-gray-800","px-4","py-2","rounded-lg","hover:bg-gray-400","transition",2,"font-family","'Roboto, sans-serif'",3,"click"],["mat-raised-button","","color","primary","type","submit",1,"hover:bg-blue-700","transition",2,"font-family","'Roboto, sans-serif'",3,"disabled"]],template:function(n,o){if(n&1){let i=y();r(0,"mat-card",1)(1,"mat-card-header")(2,"button",2),g("click",function(){return p(i),f(o.cancel())}),r(3,"mat-icon"),l(4,"close"),a()(),r(5,"mat-card-title",3)(6,"h2",4),l(7),a()()(),r(8,"mat-card-content")(9,"form",5,0),g("ngSubmit",function(){p(i);let m=S(10);return f(o.savePincode(m))}),r(11,"div",6)(12,"div",7)(13,"label",8),l(14,"Office Name"),a(),r(15,"input",9),I("ngModelChange",function(m){return p(i),D(o.formPincode.officeName,m)||(o.formPincode.officeName=m),f(m)}),a(),r(16,"small",10),l(17," Office Name is required "),a()(),r(18,"div",7)(19,"label",11),l(20,"Pincode"),a(),r(21,"input",12),I("ngModelChange",function(m){return p(i),D(o.formPincode.pincode,m)||(o.formPincode.pincode=m),f(m)}),a(),r(22,"small",13),l(23),a()(),r(24,"div",7)(25,"label",14),l(26,"District Name"),a(),r(27,"input",15),I("ngModelChange",function(m){return p(i),D(o.formPincode.districtName,m)||(o.formPincode.districtName=m),f(m)}),a(),r(28,"small",16),l(29," District Name is required "),a()(),r(30,"div",7)(31,"label",17),l(32,"Taluk"),a(),r(33,"input",18),I("ngModelChange",function(m){return p(i),D(o.formPincode.taluk,m)||(o.formPincode.taluk=m),f(m)}),a(),r(34,"small",19),l(35," Taluk is required "),a()(),r(36,"div",7)(37,"label",20),l(38,"State Name"),a(),r(39,"input",21),I("ngModelChange",function(m){return p(i),D(o.formPincode.stateName,m)||(o.formPincode.stateName=m),f(m)}),a(),r(40,"small",22),l(41," State Name is required "),a()(),r(42,"div",7)(43,"label",23),l(44,"City"),a(),r(45,"input",24),I("ngModelChange",function(m){return p(i),D(o.formPincode.city,m)||(o.formPincode.city=m),f(m)}),a(),r(46,"small",25),l(47," City is required "),a()()(),r(48,"div",26)(49,"button",27),g("click",function(){return p(i),f(o.cancel())}),l(50," Cancel "),a(),r(51,"button",28),l(52),a()()()()()}if(n&2){let i=S(10);s(7),E(" ",o.data!=null&&o.data.pincode?"Edit Pincode":"Add Pincode"," "),s(8),T("ngModel",o.formPincode.officeName),d("ngClass",F(29,R,(i.controls.officeName==null?null:i.controls.officeName.hasError("required"))&&i.submitted)),w("aria-invalid",(i.controls.officeName==null?null:i.controls.officeName.hasError("required"))&&i.submitted),s(),d("ngClass",V(31,q,(i.controls.officeName==null?null:i.controls.officeName.hasError("required"))&&i.submitted,!(i.controls.officeName!=null&&i.controls.officeName.hasError("required")&&i.submitted))),s(5),T("ngModel",o.formPincode.pincode),d("ngClass",F(34,R,((i.controls.pincode==null?null:i.controls.pincode.hasError("required"))||(i.controls.pincode==null?null:i.controls.pincode.hasError("pattern")))&&i.submitted)),w("aria-invalid",((i.controls.pincode==null?null:i.controls.pincode.hasError("required"))||(i.controls.pincode==null?null:i.controls.pincode.hasError("pattern")))&&i.submitted),s(),d("ngClass",V(36,q,((i.controls.pincode==null?null:i.controls.pincode.hasError("required"))||(i.controls.pincode==null?null:i.controls.pincode.hasError("pattern")))&&i.submitted,!((i.controls.pincode!=null&&i.controls.pincode.hasError("required")||i.controls.pincode!=null&&i.controls.pincode.hasError("pattern"))&&i.submitted))),s(),E(" ",i.controls.pincode!=null&&i.controls.pincode.hasError("required")?"Pincode is required":"Pincode must be 6 digits"," "),s(4),T("ngModel",o.formPincode.districtName),d("ngClass",F(39,R,(i.controls.districtName==null?null:i.controls.districtName.hasError("required"))&&i.submitted)),w("aria-invalid",(i.controls.districtName==null?null:i.controls.districtName.hasError("required"))&&i.submitted),s(),d("ngClass",V(41,q,(i.controls.districtName==null?null:i.controls.districtName.hasError("required"))&&i.submitted,!(i.controls.districtName!=null&&i.controls.districtName.hasError("required")&&i.submitted))),s(5),T("ngModel",o.formPincode.taluk),d("ngClass",F(44,R,(i.controls.taluk==null?null:i.controls.taluk.hasError("required"))&&i.submitted)),w("aria-invalid",(i.controls.taluk==null?null:i.controls.taluk.hasError("required"))&&i.submitted),s(),d("ngClass",V(46,q,(i.controls.taluk==null?null:i.controls.taluk.hasError("required"))&&i.submitted,!(i.controls.taluk!=null&&i.controls.taluk.hasError("required")&&i.submitted))),s(5),T("ngModel",o.formPincode.stateName),d("ngClass",F(49,R,(i.controls.stateName==null?null:i.controls.stateName.hasError("required"))&&i.submitted)),w("aria-invalid",(i.controls.stateName==null?null:i.controls.stateName.hasError("required"))&&i.submitted),s(),d("ngClass",V(51,q,(i.controls.stateName==null?null:i.controls.stateName.hasError("required"))&&i.submitted,!(i.controls.stateName!=null&&i.controls.stateName.hasError("required")&&i.submitted))),s(5),T("ngModel",o.formPincode.city),d("ngClass",F(54,R,(i.controls.city==null?null:i.controls.city.hasError("required"))&&i.submitted)),w("aria-invalid",(i.controls.city==null?null:i.controls.city.hasError("required"))&&i.submitted),s(),d("ngClass",V(56,q,(i.controls.city==null?null:i.controls.city.hasError("required"))&&i.submitted,!(i.controls.city!=null&&i.controls.city.hasError("required")&&i.submitted))),s(5),d("disabled",o.isFormInvalid()),w("aria-label",o.data!=null&&o.data.pincode?"Update pincode":"Save pincode"),s(),E(" ",o.data!=null&&o.data.pincode?"Update":"Save"," ")}},dependencies:[j,pe,Y,Me,Pe,Se,ve,Ee,Ne,ke,we,K,G,X,Z,ee,U,z,Q,$,J,te],encapsulation:2})}return e})();function gt(e,c){if(e&1&&(r(0,"div",19),l(1),a()),e&2){let t=u();s(),E(" Error: ",t.service.error(),". Please try again or contact support. ")}}function bt(e,c){e&1&&(r(0,"div",20),O(1,"mat-spinner",21),a())}function xt(e,c){if(e&1){let t=y();r(0,"mat-header-cell",51)(1,"mat-checkbox",52),g("change",function(o){p(t);let i=u(3);return f(i.toggleAllPincodes(o.checked))}),a()()}if(e&2){let t=u(3);s(),d("checked",t.isAllSelected())("indeterminate",t.selectedPincodes.length>0&&!t.isAllSelected())}}function yt(e,c){if(e&1){let t=y();r(0,"mat-cell",51)(1,"mat-checkbox",53),g("change",function(){let o=p(t).$implicit,i=u(3);return f(i.togglePincode(o))}),a()()}if(e&2){let t=c.$implicit,n=u(3);s(),d("checked",n.isSelected(t))}}function Ct(e,c){e&1&&(h(0,48),b(1,xt,2,2,"mat-header-cell",49)(2,yt,2,1,"mat-cell",50),P())}function ht(e,c){e&1&&(r(0,"mat-header-cell",54),l(1,"Office Name"),a())}function Pt(e,c){if(e&1&&(r(0,"mat-cell",54),l(1),a()),e&2){let t=c.$implicit;s(),N(t.officeName)}}function St(e,c){if(e&1&&(r(0,"button",58)(1,"mat-icon",59),l(2,"sort"),a()()),e&2){u();let t=S(5);d("matMenuTriggerFor",t)}}function vt(e,c){if(e&1&&(r(0,"button",58)(1,"mat-icon",59),l(2,"sort"),a()()),e&2){u();let t=S(5);d("matMenuTriggerFor",t)}}function wt(e,c){if(e&1){let t=y();r(0,"mat-header-cell",55),l(1," Pincode "),b(2,St,3,1,"button",56)(3,vt,3,1,"button",56),r(4,"mat-menu",null,1)(6,"button",57),g("click",function(){p(t);let o=u(2);return f(o.sortColumn("pincode","asc"))}),l(7,"Ascending"),a(),r(8,"button",57),g("click",function(){p(t);let o=u(2);return f(o.sortColumn("pincode","desc"))}),l(9,"Descending"),a()()()}if(e&2){let t=u(2);s(2),d("ngIf",t.sortField==="pincode"),s(),d("ngIf",t.sortField!=="pincode")}}function kt(e,c){if(e&1&&(r(0,"mat-cell",60),l(1),a()),e&2){let t=c.$implicit;s(),N(t.pincode)}}function Mt(e,c){e&1&&(r(0,"mat-header-cell",64),l(1,"District"),a())}function Et(e,c){if(e&1&&(r(0,"mat-cell",64),l(1),a()),e&2){let t=c.$implicit;s(),N(t.districtName)}}function Nt(e,c){e&1&&(h(0,61),b(1,Mt,2,0,"mat-header-cell",62)(2,Et,2,1,"mat-cell",63),P())}function Tt(e,c){e&1&&(r(0,"mat-header-cell",68),l(1,"Taluk"),a())}function Dt(e,c){if(e&1&&(r(0,"mat-cell",68),l(1),a()),e&2){let t=c.$implicit;s(),N(t.taluk)}}function It(e,c){e&1&&(h(0,65),b(1,Tt,2,0,"mat-header-cell",66)(2,Dt,2,1,"mat-cell",67),P())}function Ft(e,c){e&1&&(r(0,"mat-header-cell",72),l(1,"State"),a())}function Vt(e,c){if(e&1&&(r(0,"mat-cell",72),l(1),a()),e&2){let t=c.$implicit;s(),N(t.stateName)}}function Rt(e,c){e&1&&(h(0,69),b(1,Ft,2,0,"mat-header-cell",70)(2,Vt,2,1,"mat-cell",71),P())}function qt(e,c){if(e&1&&(r(0,"button",75)(1,"mat-icon",59),l(2,"sort"),a()()),e&2){u();let t=S(5);d("matMenuTriggerFor",t)}}function Lt(e,c){if(e&1&&(r(0,"button",75)(1,"mat-icon",59),l(2,"sort"),a()()),e&2){u();let t=S(5);d("matMenuTriggerFor",t)}}function At(e,c){if(e&1){let t=y();r(0,"mat-header-cell",73),l(1," City "),b(2,qt,3,1,"button",74)(3,Lt,3,1,"button",74),r(4,"mat-menu",null,2)(6,"button",57),g("click",function(){p(t);let o=u(2);return f(o.sortColumn("city","asc"))}),l(7,"Ascending"),a(),r(8,"button",57),g("click",function(){p(t);let o=u(2);return f(o.sortColumn("city","desc"))}),l(9,"Descending"),a()()()}if(e&2){let t=u(2);s(2),d("ngIf",t.sortField==="city"),s(),d("ngIf",t.sortField!=="city")}}function Ot(e,c){if(e&1&&(r(0,"mat-cell",76),l(1),a()),e&2){let t=c.$implicit;s(),N(t.city)}}function Wt(e,c){if(e&1){let t=y();r(0,"mat-header-cell",77),l(1," Actions "),r(2,"button",78),g("click",function(){p(t);let o=u(2);return f(o.refreshTable())}),r(3,"mat-icon",59),l(4,"refresh"),a()()()}}function Ht(e,c){if(e&1){let t=y();h(0),r(1,"button",80),g("click",function(){p(t);let o=u().$implicit,i=u(2);return f(i.startEdit(o))}),r(2,"mat-icon"),l(3,"edit"),a()(),r(4,"button",81),g("click",function(){p(t);let o=u().$implicit,i=u(2);return f(i.service.deletePincode(o.id))}),r(5,"mat-icon"),l(6,"delete"),a()(),P()}}function Bt(e,c){if(e&1){let t=y();r(0,"button",82)(1,"mat-icon"),l(2,"more_vert"),a()(),r(3,"mat-menu",null,4)(5,"button",83),g("click",function(){p(t);let o=u().$implicit,i=u(2);return f(i.startEdit(o))}),r(6,"mat-icon"),l(7,"edit"),a(),l(8," Edit "),a(),r(9,"button",84),g("click",function(){p(t);let o=u().$implicit,i=u(2);return f(i.service.deletePincode(o.id))}),r(10,"mat-icon"),l(11,"delete"),a(),l(12," Delete "),a()()}if(e&2){let t=S(4);d("matMenuTriggerFor",t)}}function jt(e,c){if(e&1&&(r(0,"mat-cell",79),b(1,Ht,7,0,"ng-container",46)(2,Bt,13,1,"ng-template",null,3,H),a()),e&2){let t=S(3),n=u(2);s(),d("ngIf",!n.isMobile)("ngIfElse",t)}}function zt(e,c){e&1&&O(0,"mat-header-row",85)}function Jt(e,c){if(e&1&&O(0,"mat-row",86),e&2){let t=c.$implicit;w("aria-label","Pincode row "+t.id)}}function Qt(e,c){if(e&1){let t=y();r(0,"button",88),g("click",function(){let o=p(t).$implicit,i=u(4);return f(i.onPageChange({pageIndex:o-1}))}),l(1),a()}if(e&2){let t=c.$implicit,n=u(4);W("color",n.service.currentPage()===t?"var(--mat-sys-on-primary)":"var(--mat-sys-on-surface)")("background-color",n.service.currentPage()===t?"var(--mat-sys-primary)":"transparent"),ne("bg-blue-600",n.service.currentPage()===t),w("aria-label","Page "+t),s(),E(" ",t," ")}}function $t(e,c){if(e&1&&(h(0),b(1,Qt,2,8,"button",87),P()),e&2){let t=u(3);s(),d("ngForOf",t.getPageNumbers())}}function Ut(e,c){e&1&&(r(0,"span",43),l(1,"No pages available"),a())}function Gt(e,c){if(e&1&&(h(0),b(1,$t,2,1,"ng-container",46)(2,Ut,2,0,"ng-template",null,5,H),P()),e&2){let t=S(3),n=u(2);s(),d("ngIf",n.getPageNumbers().length>0)("ngIfElse",t)}}function Kt(e,c){if(e&1&&(r(0,"mat-option",92),l(1),a()),e&2){let t=c.$implicit;d("value",t),s(),E(" ",t," ")}}function Xt(e,c){e&1&&(r(0,"mat-option",93),l(1,"No pages available"),a())}function Yt(e,c){if(e&1){let t=y();r(0,"mat-select",89),g("selectionChange",function(o){p(t);let i=u(2);return f(i.onPageChange({pageIndex:o.value-1}))}),b(1,Kt,2,2,"mat-option",90)(2,Xt,2,0,"mat-option",91),a()}if(e&2){let t=u(2);d("value",t.service.currentPage()),s(),d("ngForOf",t.getPageNumbers()),s(),d("ngIf",t.getPageNumbers().length===0)}}function Zt(e,c){if(e&1){let t=y();r(0,"div",22)(1,"mat-table",23),b(2,Ct,3,0,"ng-container",24),h(3,25),b(4,ht,2,0,"mat-header-cell",26)(5,Pt,2,1,"mat-cell",27),P(),h(6,28),b(7,wt,10,2,"mat-header-cell",29)(8,kt,2,1,"mat-cell",30),P(),b(9,Nt,3,0,"ng-container",31)(10,It,3,0,"ng-container",32)(11,Rt,3,0,"ng-container",33),h(12,34),b(13,At,10,2,"mat-header-cell",35)(14,Ot,2,1,"mat-cell",36),P(),h(15,37),b(16,Wt,5,0,"mat-header-cell",38)(17,jt,4,2,"mat-cell",39),P(),b(18,zt,1,0,"mat-header-row",40)(19,Jt,1,1,"mat-row",41),a(),r(20,"div",42)(21,"span",43),l(22),a(),r(23,"div",44)(24,"button",45),g("click",function(){p(t);let o=u();return f(o.onPageChange({pageIndex:o.service.currentPage()-2}))}),l(25," Previous "),a(),b(26,Gt,4,2,"ng-container",46)(27,Yt,3,3,"ng-template",null,0,H),r(29,"button",47),g("click",function(){p(t);let o=u();return f(o.onPageChange({pageIndex:o.service.currentPage()}))}),l(30," Next "),a()()()()}if(e&2){let t=S(28),n=u();ne("dark-theme",n.darkModeService.isDarkMode()),s(),d("dataSource",n.service.paginatedPincodes()),s(),d("ngIf",!n.isMobile),s(7),d("ngIf",!n.isMobile),s(),d("ngIf",n.responsive.isDesktop()),s(),d("ngIf",!n.isMobile),s(7),d("matHeaderRowDef",n.displayedColumns),s(),d("matRowDefColumns",n.displayedColumns),s(3),ue(" Showing ",(n.service.currentPage()-1)*n.service.pageSize()+1," to ",(n.service.currentPage()-1)*n.service.pageSize()+n.service.paginatedPincodes().length," of ",n.service.filteredPincodes().length," entries "),s(2),d("disabled",n.service.currentPage()===1),s(2),d("ngIf",!n.isMobile)("ngIfElse",t),s(3),d("disabled",n.service.currentPage()===n.service.totalPages()||n.service.totalPages()===0)}}var Ui=(()=>{class e{service=M(ct);dialog=M(nt);responsive=M(Te);darkModeService=M(De);editingPincode=null;selectedPincodes=[];displayedColumns=[];sortField=null;sortDirection="asc";isMobile=!1;isTablet=!1;breakpointSubscription;paginator;ngOnInit(){this.breakpointSubscription=this.responsive.currentBreakpoint().subscribe(t=>{this.isMobile=t==="xsmall",this.isTablet=t==="small"||t==="medium",this.updateDisplayedColumns()}),this.darkModeService.applyTheme()}ngOnDestroy(){this.breakpointSubscription?.unsubscribe()}updateDisplayedColumns(){this.isMobile?this.displayedColumns=["pincode","city","actions"]:this.isTablet?this.displayedColumns=["select","officeName","pincode","city","districtName","actions"]:this.displayedColumns=["select","officeName","pincode","districtName","taluk","stateName","city","actions"]}refreshTable(){this.sortField=null,this.sortDirection="asc",this.service.sortPincodes(null,"asc"),this.service.setPage(1),this.service.setSearchQuery(""),this.selectedPincodes=[];let t=document.getElementById("searchPincodes");t&&(t.value=""),this.service.getPincodes(),console.log("Table refreshed: sort, pagination, search reset, and data reloaded")}openPincodeDialog(t,n){this.dialog.open(st,{width:this.isMobile?"90vw":this.isTablet?"80vw":"800px",maxWidth:"100vw",data:t}).afterClosed().subscribe(o=>o&&n(o))}openAddPincodeDialog=()=>this.openPincodeDialog({},t=>this.service.addPincode(t));startEdit=t=>{this.editingPincode=v({},t),this.openPincodeDialog({pincode:this.editingPincode},n=>{this.service.updatePincode(n),this.editingPincode=null})};onSearchQueryChange(t){let n=t.target;this.service.setSearchQuery(n.value)}onPageChange(t){this.service.setPage(t.pageIndex+1),this.selectedPincodes=[],console.log("Page Changed to:",t.pageIndex+1)}sortColumn(t,n){this.sortField=t,this.sortDirection=n,this.service.sortPincodes(this.sortField,this.sortDirection)}togglePincode(t){let n=this.selectedPincodes.findIndex(o=>o.id===t.id);n===-1?this.selectedPincodes.push(t):this.selectedPincodes.splice(n,1)}isSelected(t){return this.selectedPincodes.some(n=>n.id===t.id)}toggleAllPincodes(t){t?this.selectedPincodes=[...this.service.paginatedPincodes()]:this.selectedPincodes=[]}isAllSelected(){return this.service.paginatedPincodes().length>0&&this.service.paginatedPincodes().every(t=>this.isSelected(t))}deleteSelectedPincodes(){this.selectedPincodes.forEach(t=>this.service.deletePincode(t.id)),this.selectedPincodes=[]}getPageNumbers(){let t=this.service.totalPages(),n=this.service.currentPage(),o=this.isMobile?3:this.isTablet?4:5,i=Math.max(1,n-Math.floor(o/2)),_=Math.min(t,i+o-1);_-i+1<o&&(i=Math.max(1,_-o+1));let m=[];if(t>0)for(let C=i;C<=_;C++)m.push(C);return m}trackById(t,n){return n.id}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=A({type:e,selectors:[["app-pincodes"]],viewQuery:function(n,o){if(n&1&&se(Ze,5),n&2){let i;de(i=me())&&(o.paginator=i.first)}},decls:20,vars:8,consts:[["mobilePagination",""],["pincodeSortMenu","matMenu"],["citySortMenu","matMenu"],["mobileActions",""],["actionMenu","matMenu"],["noPages",""],[1,"shadow-3xl","rounded-8",2,"font-family","'Roboto, sans-serif'"],[1,"relative","flex","items-center","justify-between","flex-col","md:flex-row","gap-4",2,"background-color","#2c3e50","color","#f7f7f7","font-family","'Roboto, sans-serif'","padding","16px"],[1,"flex","items-center"],[1,"text-20","font-semibold","m-0",2,"font-family","'Roboto, sans-serif'"],[1,"flex","items-center","w-full","md:w-1/3"],["id","searchPincodes","type","text","placeholder","Search pincodes...","aria-label","Search pincodes",1,"p-2","border","rounded","text-sm","w-full","focus:outline-none","h-9",2,"font-family","'Roboto, sans-serif'","border-color","#ced4da","background-color","#fff",3,"input"],[1,"flex","gap-2"],["mat-raised-button","","aria-label","Delete selected pincodes",1,"px-4","py-2","text-14","flex","items-center",2,"background-color","#dc3545","color","white","font-family","'Roboto, sans-serif'",3,"click","disabled"],["mat-raised-button","","aria-label","Add new pincode",1,"px-4","py-2","text-14","flex","items-center",2,"background-color","#28a745","color","white","font-family","'Roboto, sans-serif'",3,"click"],[1,"relative",2,"font-family","'Roboto, sans-serif'"],["class","mb-16 p-16 rounded-8","style","color: var(--mat-sys-error); background-color: color-mix(in srgb, var(--mat-sys-error), transparent 90%); font-family: 'Roboto, sans-serif';","role","alert",4,"ngIf"],["class","text-center mb-16",4,"ngIf"],["class","table-container",3,"dark-theme",4,"ngIf"],["role","alert",1,"mb-16","p-16","rounded-8",2,"color","var(--mat-sys-error)","background-color","color-mix(in srgb, var(--mat-sys-error), transparent 90%)","font-family","'Roboto, sans-serif'"],[1,"text-center","mb-16"],["diameter","40",2,"color","var(--mat-sys-on-surface)"],[1,"table-container"],["role","grid",1,"w-full",3,"dataSource"],["matColumnDef","select",4,"ngIf"],["matColumnDef","officeName"],["class","p-8 text-16","style","font-family: 'Roboto, sans-serif';","data-label","Office Name",4,"matHeaderCellDef"],["class","p-8 text-16","style","font-family: 'Roboto, sans-serif';","data-label","Office Name",4,"matCellDef"],["matColumnDef","pincode"],["class","p-8 text-16 flex items-center","style","font-family: 'Roboto, sans-serif';","data-label","Pincode",4,"matHeaderCellDef"],["class","p-8 text-16","style","font-family: 'Roboto, sans-serif';","data-label","Pincode",4,"matCellDef"],["matColumnDef","districtName",4,"ngIf"],["matColumnDef","taluk",4,"ngIf"],["matColumnDef","stateName",4,"ngIf"],["matColumnDef","city"],["class","p-8 text-16 flex items-center","style","font-family: 'Roboto, sans-serif';","data-label","City",4,"matHeaderCellDef"],["class","p-8 text-16","style","font-family: 'Roboto, sans-serif';","data-label","City",4,"matCellDef"],["matColumnDef","actions"],["class","p-8 text-16","style","font-family: 'Roboto, sans-serif';","data-label","Actions",4,"matHeaderCellDef"],["class","p-8","data-label","Actions",4,"matCellDef"],["class","divide-y table-header",4,"matHeaderRowDef"],["class","divide-y table-row",4,"matRowDef","matRowDefColumns"],[1,"flex","justify-between","items-center","p-4","pagination-container",2,"color","var(--mat-sys-on-surface)","font-family","'Roboto, sans-serif'"],[1,"text-12"],[1,"flex","gap-4","items-center"],["mat-button","","aria-label","Previous page",1,"px-4","py-2","rounded-4","pagination-button",2,"color","var(--mat-sys-on-surface)","font-family","'Roboto, sans-serif'",3,"click","disabled"],[4,"ngIf","ngIfElse"],["mat-button","","aria-label","Next page",1,"px-4","py-2","rounded-4","pagination-button",2,"color","var(--mat-sys-on-surface)","font-family","'Roboto, sans-serif'",3,"click","disabled"],["matColumnDef","select"],["class","p-8","data-label","Select",4,"matHeaderCellDef"],["class","p-8","data-label","Select",4,"matCellDef"],["data-label","Select",1,"p-8"],["aria-label","Select all pincodes",3,"change","checked","indeterminate"],["aria-label","Select pincode",3,"change","checked"],["data-label","Office Name",1,"p-8","text-16",2,"font-family","'Roboto, sans-serif'"],["data-label","Pincode",1,"p-8","text-16","flex","items-center",2,"font-family","'Roboto, sans-serif'"],["mat-icon-button","","aria-label","Sort pincode",3,"matMenuTriggerFor",4,"ngIf"],["mat-menu-item","",3,"click"],["mat-icon-button","","aria-label","Sort pincode",3,"matMenuTriggerFor"],[2,"color","var(--mat-sys-primary)"],["data-label","Pincode",1,"p-8","text-16",2,"font-family","'Roboto, sans-serif'"],["matColumnDef","districtName"],["class","p-8 text-16","style","font-family: 'Roboto, sans-serif';","data-label","District",4,"matHeaderCellDef"],["class","p-8 text-16","style","font-family: 'Roboto, sans-serif';","data-label","District",4,"matCellDef"],["data-label","District",1,"p-8","text-16",2,"font-family","'Roboto, sans-serif'"],["matColumnDef","taluk"],["class","p-8 text-16","style","font-family: 'Roboto, sans-serif';","data-label","Taluk",4,"matHeaderCellDef"],["class","p-8 text-16","style","font-family: 'Roboto, sans-serif';","data-label","Taluk",4,"matCellDef"],["data-label","Taluk",1,"p-8","text-16",2,"font-family","'Roboto, sans-serif'"],["matColumnDef","stateName"],["class","p-8 text-16","style","font-family: 'Roboto, sans-serif';","data-label","State",4,"matHeaderCellDef"],["class","p-8 text-16","style","font-family: 'Roboto, sans-serif';","data-label","State",4,"matCellDef"],["data-label","State",1,"p-8","text-16",2,"font-family","'Roboto, sans-serif'"],["data-label","City",1,"p-8","text-16","flex","items-center",2,"font-family","'Roboto, sans-serif'"],["mat-icon-button","","aria-label","Sort city",3,"matMenuTriggerFor",4,"ngIf"],["mat-icon-button","","aria-label","Sort city",3,"matMenuTriggerFor"],["data-label","City",1,"p-8","text-16",2,"font-family","'Roboto, sans-serif'"],["data-label","Actions",1,"p-8","text-16",2,"font-family","'Roboto, sans-serif'"],["mat-icon-button","","aria-label","Refresh table",3,"click"],["data-label","Actions",1,"p-8"],["mat-icon-button","","aria-label","Edit pincode",1,"edit-button",3,"click"],["mat-icon-button","","aria-label","Delete pincode",1,"delete-button",3,"click"],["mat-icon-button","","aria-label","Pincode actions",3,"matMenuTriggerFor"],["mat-menu-item","","aria-label","Edit pincode",3,"click"],["mat-menu-item","","aria-label","Delete pincode",3,"click"],[1,"divide-y","table-header"],[1,"divide-y","table-row"],["mat-button","","class","px-4 py-2 rounded-4 pagination-button",3,"bg-blue-600","color","background-color","click",4,"ngFor","ngForOf"],["mat-button","",1,"px-4","py-2","rounded-4","pagination-button",3,"click"],["aria-label","Select page",1,"w-20","pagination-select",3,"selectionChange","value"],[3,"value",4,"ngFor","ngForOf"],["disabled","",4,"ngIf"],[3,"value"],["disabled",""]],template:function(n,o){n&1&&(r(0,"mat-card",6)(1,"mat-card-header",7)(2,"mat-card-title",8)(3,"h2",9),l(4,"Pincodes"),a()(),r(5,"div",10)(6,"input",11),g("input",function(_){return o.onSearchQueryChange(_)}),a()(),r(7,"div",12)(8,"button",13),g("click",function(){return o.deleteSelectedPincodes()}),r(9,"mat-icon"),l(10,"delete"),a(),l(11," Delete "),a(),r(12,"button",14),g("click",function(){return o.openAddPincodeDialog()}),r(13,"mat-icon"),l(14,"add"),a(),l(15," Add Pincode "),a()()(),r(16,"mat-card-content",15),b(17,gt,2,1,"div",16)(18,bt,2,0,"div",17)(19,Zt,31,16,"div",18),a()()),n&2&&(s(8),d("disabled",!o.selectedPincodes.length),s(),W("color","#FFFFFF"),s(4),W("color","#FFFFFF"),s(4),d("ngIf",o.service.error()),s(),d("ngIf",o.service.isLoading()),s(),d("ngIf",!o.service.isLoading()))},dependencies:[j,fe,_e,Y,Ge,Oe,He,Je,Be,We,Qe,je,ze,$e,Ue,K,G,be,Z,ee,et,X,te,rt,ot,U,z,Q,$,J,Ae,Le,he,ye,xe,Ce,Ye,Xe,Ke],encapsulation:2})}return e})();export{Ui as PincodesComponent};
//# sourceMappingURL=pincodes.component-ZHKPLK4R.js.map
