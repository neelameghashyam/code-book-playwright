import{a as n,b as c,c as g,d as x,e as v,f as y}from"./chunk-7GDRIGFI.js";import{Kc as f}from"./chunk-ZH2ICRTR.js";var S=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),l={randomUUID:S};var i,b=new Uint8Array(16);function p(){if(!i&&(i=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!i))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(b)}var o=[];for(d=0;d<256;++d)o.push((d+256).toString(16).slice(1));var d;function h(e,r=0){return(o[e[r+0]]+o[e[r+1]]+o[e[r+2]]+o[e[r+3]]+"-"+o[e[r+4]]+o[e[r+5]]+"-"+o[e[r+6]]+o[e[r+7]]+"-"+o[e[r+8]]+o[e[r+9]]+"-"+o[e[r+10]]+o[e[r+11]]+o[e[r+12]]+o[e[r+13]]+o[e[r+14]]+o[e[r+15]]).toLowerCase()}function I(e,r,t){if(l.randomUUID&&!r&&!e)return l.randomUUID();e=e||{};var a=e.random||(e.rng||p)();if(a[6]=a[6]&15|64,a[8]=a[8]&63|128,r){t=t||0;for(var s=0;s<16;++s)r[t+s]=a[s];return r}return h(a)}var m=I;var U={businesses:[],loading:!1,error:null},u="businesses",C=c({providedIn:"root"},y(U),g(({businesses:e})=>({businessCount:f(()=>e().length)})),v(e=>({loadBusinesses(){try{n(e,{loading:!0});let r=localStorage.getItem(u),t=r?JSON.parse(r):[];n(e,{businesses:t,loading:!1,error:null})}catch{n(e,{loading:!1,error:"Failed to load businesses"})}},addBusiness(r){try{n(e,{loading:!0});let t=[...e.businesses()];r.id=m(),t.push(r),localStorage.setItem(u,JSON.stringify(t)),n(e,{businesses:t,loading:!1,error:null})}catch{n(e,{loading:!1,error:"Failed to add business"})}},updateBusiness(r){try{n(e,{loading:!0});let t=[...e.businesses()],a=t.findIndex(s=>s.id===r.id);if(a===-1)throw new Error("Business not found");t[a]=r,localStorage.setItem(u,JSON.stringify(t)),n(e,{businesses:t,loading:!1,error:null})}catch{n(e,{loading:!1,error:"Failed to update business"})}},deleteBusiness(r){try{n(e,{loading:!0});let t=e.businesses().filter(a=>a.id!==r);localStorage.setItem(u,JSON.stringify(t)),n(e,{businesses:t,loading:!1,error:null})}catch{n(e,{loading:!1,error:"Failed to delete business"})}},getBusiness(r){try{return e.businesses().find(t=>t.id===r)}catch{n(e,{error:`Failed to fetch business with ID ${r}`});return}}})),x({onInit(e){e.loadBusinesses()}}));export{m as a,C as b};
//# sourceMappingURL=chunk-YFDAIOHD.js.map
