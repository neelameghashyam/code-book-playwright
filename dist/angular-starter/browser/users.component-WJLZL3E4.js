import{b as V,c as z,d as N}from"./chunk-YVVDMIVI.js";import{h as j}from"./chunk-TUNMWEV2.js";import{a as D}from"./chunk-JGDGZY6W.js";import{b as P,c as ke}from"./chunk-LNA6J5UG.js";import{a as g,b as xe,c as we,d as _e,e as Ie,f as Ce}from"./chunk-7GDRIGFI.js";import{k as Ee,l as Ue}from"./chunk-PPHCUSVG.js";import{a as Fe,b as Be,c as Te,g as De}from"./chunk-LAF373ZA.js";import{B,D as M,G as T,H as me,I as ce,K as S,L as ue,M as ge,N as fe,O as he,P as be,T as ve,W as ye,X as Se,ha as Me,ja as O}from"./chunk-7M6NR5Y6.js";import{h as k}from"./chunk-277XKCPD.js";import{h as ae,m as se,n as le,pa as F,ra as pe,s as de}from"./chunk-JMDSQALO.js";import{Bc as l,Cc as d,Ec as R,Kc as G,Lb as u,Lc as ne,Mb as n,Nb as i,Ob as f,Qc as oe,Sb as L,Xb as h,Yb as I,_a as r,a as J,ac as X,b as $,bc as Y,cc as Z,d as Q,eb as v,ga as b,ic as U,lb as E,lc as a,ma as w,mc as p,na as _,nc as y,oa as W,pa as K,qc as ee,rb as q,rc as te,s as H,sc as ie,tc as C,uc as re}from"./chunk-ZH2ICRTR.js";var Ve={initialized:!1,error:null,users:[]},Ne="https://jsonplaceholder.typicode.com/users",A=xe({providedIn:"root"},Ce(Ve),we(({users:s})=>({users:G(()=>s()),isLoading:G(()=>!Ve.initialized)})),Ie((s,x=b(de))=>({loadUsers(){return Q(this,null,function*(){try{let o=localStorage.getItem("users-data");if(o){let c=JSON.parse(o);g(s,{users:c,initialized:!0,error:null});return}let m=(yield H(x.get(Ne))).map(c=>({id:c.id,name:c.name,company:c.company.name,bs:c.company.bs,website:c.website}));localStorage.setItem("users-data",JSON.stringify(m)),g(s,{users:m,initialized:!0,error:null})}catch(o){throw g(s,{error:"Failed to load users"}),o}})},addUser(o){try{let e=[...s.users(),$(J({},o),{id:Date.now()})];localStorage.setItem("users-data",JSON.stringify(e)),g(s,{users:e,error:null})}catch(e){throw g(s,{error:"Failed to add user"}),e}},updateUser(o){try{let e=s.users().map(m=>m.id===o.id?o:m);localStorage.setItem("users-data",JSON.stringify(e)),g(s,{users:e,error:null})}catch(e){throw g(s,{error:"Failed to update user"}),e}},deleteUser(o){try{let e=s.users().filter(m=>m.id!==o);localStorage.setItem("users-data",JSON.stringify(e)),g(s,{users:e,error:null})}catch(e){throw g(s,{error:"Failed to delete user"}),e}},getUser(o){try{return s.users().find(e=>e.id===o)}catch(e){throw g(s,{error:`Failed to fetch user with ID ${o}`}),e}}})),_e({onInit(s){s.loadUsers()}}));var ze=(()=>{class s{ref;translateService;toastr;data;darkModeService;title="Add User";store=b(A);isEdit=!1;userForm=new ce({id:new S({value:0,disabled:!0}),name:new S("",M.required),company:new S("",M.required),bs:new S("",M.required),website:new S("",M.required)});constructor(t,o,e,m,c){this.ref=t,this.translateService=o,this.toastr=e,this.data=m,this.darkModeService=c}ngOnInit(){if(this.data?.userId){this.isEdit=!0,this.title="Edit User";let t=this.store.getUser(this.data.userId);t?this.userForm.patchValue({id:t.id,name:t.name,company:t.company,bs:t.bs,website:t.website}):(this.toastr.error("Failed to load user data"),this.closePopup())}}saveUser(){if(this.userForm.invalid){this.toastr.error("Please fill all required fields");return}let t={id:this.isEdit?this.userForm.getRawValue().id:Date.now(),name:this.userForm.getRawValue().name,company:this.userForm.getRawValue().company,bs:this.userForm.getRawValue().bs,website:this.userForm.getRawValue().website};try{this.isEdit?(this.store.updateUser(t),this.toastr.success("User updated successfully")):(this.store.addUser(t),this.toastr.success("User added successfully")),this.closePopup()}catch{this.toastr.error(this.isEdit?"Failed to update user":"Failed to add user")}}closePopup(){this.ref.close()}static \u0275fac=function(o){return new(o||s)(v(Fe),v(V),v(j),v(Be),v(D))};static \u0275cmp=E({type:s,selectors:[["app-add-user"]],decls:43,vars:41,consts:[[3,"ngSubmit","formGroup"],[1,"bg-white","rounded-lg","shadow-lg","overflow-hidden"],[1,"px-6","py-4"],[1,"text-xl","font-semibold","text-white"],[1,"p-6","space-y-6"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"space-y-2"],[1,"block","text-sm","font-medium","text-gray-700"],["formControlName","id","type","number","readonly","",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-blue-500","focus:border-blue-500","bg-gray-100"],["formControlName","name","required","",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-blue-500","focus:border-blue-500",3,"placeholder"],["formControlName","company","required","",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-blue-500","focus:border-blue-500",3,"placeholder"],["formControlName","bs","required","",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-blue-500","focus:border-blue-500",3,"placeholder"],[1,"md:col-span-2","space-y-2"],["formControlName","website","required","",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-blue-500","focus:border-blue-500",3,"placeholder"],[1,"bg-gray-50","px-6","py-4","flex","justify-end","space-x-3"],["type","submit",1,"px-4","py-2","bg-blue-600","hover:bg-blue-700","text-white","font-medium","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500"],["type","button",1,"px-4","py-2","bg-gray-200","hover:bg-gray-300","text-gray-800","font-medium","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-gray-500",3,"click"]],template:function(o,e){o&1&&(n(0,"form",0),h("ngSubmit",function(){return e.saveUser()}),n(1,"div",1)(2,"div",2)(3,"h2",3),a(4),i()(),n(5,"div",4)(6,"div",5)(7,"div",6)(8,"label",7),a(9),l(10,"translate"),i(),f(11,"input",8),i(),n(12,"div",6)(13,"label",7),a(14),l(15,"translate"),i(),f(16,"input",9),l(17,"translate"),i(),n(18,"div",6)(19,"label",7),a(20),l(21,"translate"),i(),f(22,"input",10),l(23,"translate"),i(),n(24,"div",6)(25,"label",7),a(26),l(27,"translate"),i(),f(28,"input",11),l(29,"translate"),i(),n(30,"div",12)(31,"label",7),a(32),l(33,"translate"),i(),f(34,"input",13),l(35,"translate"),i()()(),n(36,"div",14)(37,"button",15),a(38),l(39,"translate"),i(),n(40,"button",16),h("click",function(){return e.closePopup()}),a(41),l(42,"translate"),i()()()()),o&2&&(U("dark-theme",e.darkModeService.isDarkMode()),u("formGroup",e.userForm),r(4),p(e.title),r(5),p(d(10,19,"userId")),r(5),p(d(15,21,"userName")),r(2),u("placeholder",C(d(17,23,"name"))),r(4),p(d(21,25,"company")),r(2),u("placeholder",C(d(23,27,"company"))),r(4),p(d(27,29,"businessStrategy")),r(2),u("placeholder",C(d(29,31,"businessStrategy"))),r(4),p(d(33,33,"website")),r(2),u("placeholder",C(d(35,35,"website"))),r(4),y(" ",d(39,37,"save")," "),r(3),y(" ",d(42,39,"close")," "))},dependencies:[k,Se,ge,B,fe,T,me,ve,he,be,Me,O,F,pe,N,z],encapsulation:2})}return s})();function qe(s,x){if(s&1){let t=L();n(0,"tr")(1,"td",19),a(2),i(),n(3,"td",19),a(4),i(),n(5,"td",19),a(6),i(),n(7,"td",19),a(8),i(),n(9,"td",19),a(10),i(),n(11,"td",20)(12,"button",21),h("click",function(){let e=w(t).$implicit,m=I();return _(m.editUser(e.id))}),a(13),l(14,"translate"),i(),n(15,"button",22),h("click",function(){let e=w(t).$implicit,m=I();return _(m.deleteUser(e.id))}),a(16),l(17,"translate"),i()()()}if(s&2){let t=x.$implicit;r(2),p(t.id),r(2),p(t.name),r(2),p(t.company),r(2),p(t.bs),r(2),p(t.website),r(3),y(" ",d(14,7,"edit")," "),r(3),y(" ",d(17,9,"delete")," ")}}function Le(s,x){if(s&1){let t=L();n(0,"div",23)(1,"div",24)(2,"div",25)(3,"span",26),a(4),l(5,"translate"),i(),n(6,"span",27),a(7),i()(),n(8,"div",25)(9,"span",26),a(10),l(11,"translate"),i(),n(12,"span",27),a(13),i()(),n(14,"div",25)(15,"span",26),a(16),l(17,"translate"),i(),n(18,"span",27),a(19),i()(),n(20,"div",25)(21,"span",26),a(22),l(23,"translate"),i(),n(24,"span",27),a(25),i()(),n(26,"div",25)(27,"span",26),a(28),l(29,"translate"),i(),n(30,"span",27),a(31),i()()(),n(32,"div",28)(33,"button",29),h("click",function(){let e=w(t).$implicit,m=I();return _(m.editUser(e.id))}),a(34),l(35,"translate"),i(),n(36,"button",30),h("click",function(){let e=w(t).$implicit,m=I();return _(m.deleteUser(e.id))}),a(37),l(38,"translate"),i()()()}if(s&2){let t=x.$implicit;r(4),p(d(5,12,"userId")),r(3),p(t.id),r(3),p(d(11,14,"name")),r(3),p(t.name),r(3),p(d(17,16,"company")),r(3),p(t.company),r(3),p(d(23,18,"businessStrategy")),r(3),p(t.bs),r(3),p(d(29,20,"website")),r(3),p(t.website),r(3),y(" ",d(35,22,"edit")," "),r(3),y(" ",d(38,24,"delete")," ")}}var Ct=(()=>{class s{darkModeService;translateService;store=b(A);toastr=b(j);dataSource=new Ue([]);displayedColumns=["id","name","company","bs","website","action"];dialog=b(Te);cdr=b(oe);paginator;pageSizeOptions=[5,10,25];pageSize=5;searchTerm="";constructor(t,o){this.darkModeService=t,this.translateService=o,ne(()=>{this.dataSource.data=this.store.users(),this.paginator?this.dataSource.paginator=this.paginator:console.warn("Paginator not initialized"),this.store.error()&&this.toastr.error(this.store.error()),this.cdr.detectChanges()})}ngOnInit(){this.store.loadUsers(),this.dataSource.filterPredicate=(t,o)=>{let e=o.toLowerCase();return t.name.toLowerCase().includes(e)||t.company.toLowerCase().includes(e)||t.bs.toLowerCase().includes(e)||t.website.toLowerCase().includes(e)||t.id.toString().includes(e)}}ngOnDestroy(){console.log("Destroying UsersComponent")}addUser(){this.openPopup(0)}deleteUser(t){this.store.deleteUser(t)}editUser(t){this.openPopup(t)}openPopup(t){this.dialog.open(ze,{width:"50%",exitAnimationDuration:"1000ms",enterAnimationDuration:"1000ms",data:{userId:t}})}applyFilter(t){let o=t.target.value;this.dataSource.filter=o.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage(),this.cdr.detectChanges()}static \u0275fac=function(o){return new(o||s)(v(D),v(V))};static \u0275cmp=E({type:s,selectors:[["app-users"]],viewQuery:function(o,e){if(o&1&&X(P,5),o&2){let m;Y(m=Z())&&(e.paginator=m.first)}},decls:44,vars:42,consts:[[1,"bg-white","rounded-lg","shadow-lg","overflow-hidden"],[1,"p-4","border-b","border-gray-200","flex","justify-between","items-center"],[1,"relative","w-64"],["type","text",1,"w-full","pl-4","pr-10","py-2","rounded-lg","border","border-gray-300","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","input","placeholder","ngModel"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"absolute","right-3","top-2.5","h-5","w-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],[1,"px-4","py-2","bg-blue-600","hover:bg-blue-700","text-white","rounded-lg","transition","duration-200","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-opacity-50",3,"click"],[1,"p-4","hidden","md:block"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],["scope","col",1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],[4,"ngFor","ngForOf"],[1,"mt-4","flex","justify-center"],["showFirstLastButtons","","aria-label","Select page of users",3,"pageSizeOptions","pageSize"],[1,"p-4","md:hidden"],[1,"grid","grid-cols-1","gap-4"],["class","bg-white rounded-lg shadow p-4",4,"ngFor","ngForOf"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-900"],[1,"px-6","py-4","whitespace-nowrap","text-sm"],[1,"mr-2","px-3","py-1","bg-blue-600","hover:bg-blue-700","text-white","rounded-md","text-sm","transition","duration-200","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-opacity-50",3,"click"],[1,"px-3","py-1","bg-red-600","hover:bg-red-700","text-white","rounded-md","text-sm","transition","duration-200","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:ring-opacity-50",3,"click"],[1,"bg-white","rounded-lg","shadow","p-4"],[1,"space-y-2"],[1,"flex","justify-between"],[1,"text-sm","font-medium","text-gray-500"],[1,"text-sm","text-gray-900"],[1,"mt-4","flex","space-x-2"],[1,"flex-1","px-3","py-1","bg-blue-600","hover:bg-blue-700","text-white","rounded-md","text-sm","transition","duration-200","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-opacity-50",3,"click"],[1,"flex-1","px-3","py-1","bg-red-600","hover:bg-red-700","text-white","rounded-md","text-sm","transition","duration-200","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:ring-opacity-50",3,"click"]],template:function(o,e){o&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"input",3),l(4,"translate"),ie("ngModelChange",function(c){return te(e.searchTerm,c)||(e.searchTerm=c),c}),h("input",function(c){return e.applyFilter(c)}),i(),W(),n(5,"svg",4),f(6,"path",5),i()(),K(),n(7,"button",6),h("click",function(){return e.addUser()}),a(8),l(9,"translate"),i()(),n(10,"div",7)(11,"div",8)(12,"table",9)(13,"thead",10)(14,"tr")(15,"th",11),a(16),l(17,"translate"),i(),n(18,"th",11),a(19),l(20,"translate"),i(),n(21,"th",11),a(22),l(23,"translate"),i(),n(24,"th",11),a(25),l(26,"translate"),i(),n(27,"th",11),a(28),l(29,"translate"),i(),n(30,"th",11),a(31),l(32,"translate"),i()()(),n(33,"tbody",12),q(34,qe,18,11,"tr",13),l(35,"slice"),i()()(),n(36,"div",14),f(37,"mat-paginator",15),i()(),n(38,"div",16)(39,"div",17),q(40,Le,39,26,"div",18),l(41,"slice"),i(),n(42,"div",14),f(43,"mat-paginator",15),i()()()),o&2&&(U("dark-theme",e.darkModeService.isDarkMode()),r(3),u("placeholder",re("",d(4,18,"search"),"...")),ee("ngModel",e.searchTerm),r(5),y(" ",d(9,20,"addNew")," "),r(8),p(d(17,22,"userId")),r(3),p(d(20,24,"name")),r(3),p(d(23,26,"company")),r(3),p(d(26,28,"businessStrategy")),r(3),p(d(29,30,"website")),r(3),p(d(32,32,"actions")),r(3),u("ngForOf",R(35,34,e.dataSource.filteredData,e.paginator?e.paginator.pageIndex*e.paginator.pageSize:0,e.paginator?(e.paginator.pageIndex+1)*e.paginator.pageSize:e.pageSize)),r(3),u("pageSizeOptions",e.pageSizeOptions)("pageSize",e.pageSize),r(3),u("ngForOf",R(41,38,e.dataSource.filteredData,e.paginator?e.paginator.pageIndex*e.paginator.pageSize:0,e.paginator?(e.paginator.pageIndex+1)*e.paginator.pageSize:e.pageSize)),r(3),u("pageSizeOptions",e.pageSizeOptions)("pageSize",e.pageSize))},dependencies:[k,F,De,Ee,ke,P,le,ae,se,ye,B,T,ue,O,N,z],encapsulation:2})}return s})();export{Ct as UsersComponent};
//# sourceMappingURL=users.component-WJLZL3E4.js.map
